<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Extending recipes · BasicTreePlots.jl</title><meta name="title" content="Extending recipes · BasicTreePlots.jl"/><meta property="og:title" content="Extending recipes · BasicTreePlots.jl"/><meta property="twitter:title" content="Extending recipes · BasicTreePlots.jl"/><meta name="description" content="Documentation for BasicTreePlots.jl."/><meta property="og:description" content="Documentation for BasicTreePlots.jl."/><meta property="twitter:description" content="Documentation for BasicTreePlots.jl."/><meta property="og:url" content="https://BenjaminDoran.github.io/BasicTreePlots.jl/tutorials/extending-recipes/"/><meta property="twitter:url" content="https://BenjaminDoran.github.io/BasicTreePlots.jl/tutorials/extending-recipes/"/><link rel="canonical" href="https://BenjaminDoran.github.io/BasicTreePlots.jl/tutorials/extending-recipes/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">BasicTreePlots.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox" checked/><label class="tocitem" for="menuitem-2"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../00-index/">Getting started</a></li><li><a class="tocitem" href="../extending-for-new-treetypes/">Extending to custom types</a></li><li class="is-active"><a class="tocitem" href>Extending recipes</a><ul class="internal"><li><a class="tocitem" href="#Public-attributes-of-TreePlot"><span>Public attributes of TreePlot</span></a></li><li><a class="tocitem" href="#using-Makie&#39;s-compute-graph"><span>using Makie&#39;s compute graph</span></a></li></ul></li><li><a class="tocitem" href="../layoutstyle/">Layout and branch styles</a></li><li><a class="tocitem" href="../orientation_example/">Example showing orienting tree</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Gallery</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../gallery/00-index/">Gallery</a></li><li><a class="tocitem" href="../../gallery/big_phylogeny/">Larger phylogeny</a></li><li><a class="tocitem" href="../../gallery/clade_annotations/">Annotating various clade groups</a></li><li><a class="tocitem" href="../../gallery/phylogeny-with-heatmap/">Phylogeny with matched data</a></li><li><a class="tocitem" href="../../gallery/phylogeny_of_organisms/">Phylogeny of some organisms</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../reference/00-index/">BasicTreePlots</a></li><li><a class="tocitem" href="../../reference/treecladelabel/">treecladelabel</a></li><li><a class="tocitem" href="../../reference/treehilight/">treehilight</a></li><li><a class="tocitem" href="../../reference/treelabels/">treelabels</a></li><li><a class="tocitem" href="../../reference/treeplot/">treeplot</a></li><li><a class="tocitem" href="../../reference/treescatter/">treescatter</a></li></ul></li><li><a class="tocitem" href="../../90-contributing/">Contributing guidelines</a></li><li><a class="tocitem" href="../../91-developer/">Developer documentation</a></li><li><a class="tocitem" href="../../changelog/">Change Log</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Extending recipes</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Extending recipes</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/BenjaminDoran/BasicTreePlots.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/BenjaminDoran/BasicTreePlots.jl/blob/main/docs/src/literate-tutorials/extending-recipes.jl#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Extending-recipes"><a class="docs-heading-anchor" href="#Extending-recipes">Extending recipes</a><a id="Extending-recipes-1"></a><a class="docs-heading-anchor-permalink" href="#Extending-recipes" title="Permalink"></a></h1><h2 id="Public-attributes-of-TreePlot"><a class="docs-heading-anchor" href="#Public-attributes-of-TreePlot">Public attributes of TreePlot</a><a id="Public-attributes-of-TreePlot-1"></a><a class="docs-heading-anchor-permalink" href="#Public-attributes-of-TreePlot" title="Permalink"></a></h2><p>If you want to make additional plots that match or extend tree plot. You can use the coordinates that are precomputed by <code>treeplot</code>. Specifically, some useful attributes are <code>tp.orderedpoints</code>, <code>tp.nodepoints</code>, <code>tp.maxtreedepth</code></p><pre><code class="language-julia hljs">using CairoMakie, BasicTreePlots

tree = ((:a, :b), (:c, (:d, :e)))
fig, ax, tp = treeplot(tree)</code></pre><img src="32eddfe2.png" alt="Example block output"/><p>the ordered points are returned in prewalk order i.e. like  returned by <code>AbstractTree.PreOrderDFS(tree)</code>.</p><pre><code class="language-julia hljs">tp.orderedpoints[]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">9-element Vector{Point{2, Float32}}:
 [0.0, 2.625]
 [1.0, 1.5]
 [2.0, 1.0]
 [2.0, 2.0]
 [1.0, 3.75]
 [2.0, 3.0]
 [2.0, 4.5]
 [3.0, 4.0]
 [3.0, 5.0]</code></pre><p>This attribute can be use directly in a lot of makie&#39;s default plotting recipes, because it is just a vector of coordinates.</p><p>The nodepoints is an <code>OrderedDict</code> of <code>node=&gt;coordinate</code> pairs in postwalk order i.e. like returned by <code>AbstractTrees.PostOrderDFS(tree)</code></p><pre><code class="language-julia hljs">tp.nodepoints[]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">OrderedCollections.OrderedDict{Any, Point{2, Float32}} with 9 entries:
  :a                         =&gt; [2.0, 1.0]
  :b                         =&gt; [2.0, 2.0]
  (:a, :b)                   =&gt; [1.0, 1.5]
  :c                         =&gt; [2.0, 3.0]
  :d                         =&gt; [3.0, 4.0]
  :e                         =&gt; [3.0, 5.0]
  (:d, :e)                   =&gt; [2.0, 4.5]
  (:c, (:d, :e))             =&gt; [1.0, 3.75]
  ((:a, :b), (:c, (:d, :e))) =&gt; [0.0, 2.625]</code></pre><p>This attribute is harder to use directly in Makie, but is very useful when seting up further computations on the tree. See following section.</p><p>Another useful attribute is</p><pre><code class="language-julia hljs">tp.maxtreedepth[]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">3.0f0</code></pre><p>Which is distance to the root of the deepest node in the tree. This can be useful when adding annotations  outside of the tree&#39;s plotting space.</p><h2 id="using-Makie&#39;s-compute-graph"><a class="docs-heading-anchor" href="#using-Makie&#39;s-compute-graph">using Makie&#39;s compute graph</a><a id="using-Makie&#39;s-compute-graph-1"></a><a class="docs-heading-anchor-permalink" href="#using-Makie&#39;s-compute-graph" title="Permalink"></a></h2><p>To add additional compute nodes into Makie&#39;s plotting system we can use the <code>map!()</code> function like so</p><p>For example to plot markers for just the leaves of the tree.</p><pre><code class="language-julia hljs">map!(tp.attributes, [:tree, :nodepoints], :leafcoords) do tree, nodepoints
    leafcoords = [nodepoints[node] for node in PreOrderDFS(tree) if BasicTreePlots.isleaf(node)]
    return leafcoords
end;
scatter!(tp.leafcoords; color = 1:5, markersize = 20)
fig</code></pre><img src="94633209.png" alt="Example block output"/><p>We can do this for all sorts of things to get the transformed features we need for additional plots. see also <a href="https://docs.makie.org/stable/explanations/recipes#Attribute-and-Argument-Manipulation">Makie&#39;s documentation</a></p><p>This has the advantage that these features should get update automatically if the underlying tree updates, as opposed to us needing to manually update these coordinates if we externally accessed the <code>tp.nodepoints[]</code> variable. or the original <code>tree</code> variable.</p><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../extending-for-new-treetypes/">« Extending to custom types</a><a class="docs-footer-nextpage" href="../layoutstyle/">Layout and branch styles »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Friday 9 January 2026 03:25">Friday 9 January 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
